# 项目介绍

## 什么是 stdiolink

stdiolink 是一个基于 Qt 的跨平台进程间通信（IPC）框架。它使用 JSONL（JSON Lines）协议，通过标准输入/输出（stdin/stdout）实现进程间的数据交换。

## 核心概念

### Host 与 Driver

stdiolink 采用 Host-Driver 架构：

- **Host**：主控进程，负责启动和管理 Driver 进程，发送请求并接收响应
- **Driver**：工作进程，接收 Host 的请求，执行具体任务并返回结果

```
┌─────────┐    stdin     ┌─────────┐
│         │ ──────────▶  │         │
│  Host   │              │ Driver  │
│         │  ◀────────── │         │
└─────────┘    stdout    └─────────┘
```

### JSONL 协议

每条消息占一行，使用 JSON 格式编码：

```json
{"cmd":"echo","data":{"msg":"hello"}}
```

响应采用两行格式：
```json
{"status":"done","code":0}
{"echo":"hello"}
```

### 元数据系统

Driver 可以通过元数据描述自己支持的命令、参数类型和约束条件，实现：

- 自动参数验证
- 自动生成帮助文档
- 自动生成 UI 表单

## 设计理念

### 简单可靠

- 使用成熟的 stdin/stdout 通信机制
- JSONL 格式易于调试和排查问题
- 无需复杂的网络配置或端口管理

### 语言无关

- 任何能读写 stdin/stdout 的语言都可以实现 Driver
- Host 端使用 Qt/C++，提供完整的进程管理能力

### 自描述

- Driver 通过元数据描述自己的能力
- Host 可以动态发现和调用 Driver 功能
- 支持自动生成文档和 UI

## 适用场景

### 插件系统

将功能模块实现为独立的 Driver 进程：

- 插件崩溃不影响主程序
- 插件可以使用不同的技术栈
- 支持热更新和动态加载

### 工具链集成

将命令行工具封装为 Driver：

- 统一的调用接口
- 结构化的输入输出
- 支持进度反馈

### 微服务本地化

在单机环境下实现类似微服务的架构：

- 进程隔离
- 独立部署
- 简化通信

## 功能特性

| 特性 | 说明 |
|------|------|
| 双模式运行 | 支持 Stdio 模式和 Console 模式 |
| 元数据系统 | 自描述的命令和参数定义 |
| 参数验证 | 自动类型检查和约束验证 |
| 默认值填充 | 自动填充缺失的可选参数 |
| 多 Driver 并发 | 同时管理多个 Driver 进程 |
| 事件流 | 支持中间状态和进度反馈 |
| UI 生成 | 从元数据自动生成表单描述 |
| 文档生成 | 自动生成 Markdown/OpenAPI 文档 |

## 下一步

- [快速入门](02-quick-start.md) - 开始使用 stdiolink
- [架构概述](03-architecture.md) - 深入了解系统架构
