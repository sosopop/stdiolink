# StdioLink UI 产品设计需求文档

## 版本信息
- **版本**: 2.0.0
- **更新日期**: 2026-02-12
- **目标平台**: Web（桌面端优先，兼顾平板与移动端）

---

## 目录
1. [设计概览](#1-设计概览)
2. [设计原则](#2-设计原则)
3. [视觉系统](#3-视觉系统)
4. [组件库](#4-组件库)
5. [布局系统](#5-布局系统)
6. [页面设计](#6-页面设计)
7. [交互规范](#7-交互规范)
8. [数据可视化](#8-数据可视化)
9. [响应式设计](#9-响应式设计)
10. [开发指南](#10-开发指南)

---

## 1. 设计概览

### 1.1 产品定位

StdioLink 是一个专业的服务编排和管理平台，为开发者提供服务生命周期管理、实时监控和配置管理功能。UI 设计应体现：

- **专业性**：面向开发者的工具，需要清晰的信息层次
- **效率性**：快速访问常用功能，减少操作步骤
- **可靠性**：状态明确，操作可预测，错误可恢复

### 1.2 核心用户场景

1. **总览监控**：通过仪表盘快速了解系统整体运行状态
2. **服务浏览与管理**：查看、扫描、配置服务
3. **项目创建与编排**：创建项目，关联服务，配置参数
4. **实例监控**：实时监控运行中的服务实例，查看日志
5. **驱动管理**：管理和配置驱动程序
6. **配置编辑**：基于 schema 的智能表单编辑

### 1.3 设计目标

- **一致性**：统一的视觉语言和交互模式
- **可扩展性**：组件化设计，易于扩展新功能
- **可访问性**：支持键盘导航，符合 WCAG 2.1 AA 标准
- **性能**：大数据量下依然流畅（虚拟滚动、懒加载）

---

## 2. 设计原则

### 2.1 清晰优先

- 信息层次分明，主次清晰
- 使用合适的字重、颜色、间距区分内容
- 避免过度装饰，保持界面简洁

### 2.2 操作高效

- 常用功能一键直达
- 支持批量操作
- 提供快捷键支持
- 智能默认值减少输入

### 2.3 反馈及时

- 所有操作提供即时反馈
- 长时间操作显示进度
- 错误提示清晰，提供解决方案

### 2.4 容错友好

- 重要操作二次确认
- 支持撤销/重做
- 自动保存草稿

---

## 3. 视觉系统

### 3.1 色彩系统

#### 3.1.1 主色调

品牌色采用蓝色系，从极浅到极深共 10 个梯度。主色为中等明度的蓝色，用于主要操作按钮、链接、选中状态和品牌标识。浅色梯度用于背景高亮和悬停态，深色梯度用于按下态和强调文字。

#### 3.1.2 功能色

系统定义四组功能色，每组包含浅底色、标准色和深色三个梯度：

- **成功色（绿色系）**：用于运行中状态、验证通过、成功操作反馈
- **警告色（橙色系）**：用于等待中/启动中状态、配置不完整提示
- **错误色（红色系）**：用于实例错误、验证失败、危险操作
- **信息色（青色系）**：用于一般信息提示、停止状态标签

#### 3.1.3 中性色

灰色系从近白到近黑共 10 个梯度，用于背景、边框、分割线、辅助文字、正文和标题等不同层级的内容。最浅的灰色用于页面背景，中间灰度用于边框和辅助文字，最深的灰色用于正文标题。

#### 3.1.4 语义色应用规则

| 状态 | 色系 | 使用场景 |
|------|------|----------|
| Running（运行中） | 成功色 | 实例运行中 |
| Stopped（已停止） | 中性灰 | 实例已停止 |
| Error（错误） | 错误色 | 实例错误、项目无效 |
| Pending（等待中） | 警告色 | 等待中、启动中 |
| Valid（有效） | 成功色深色 | 验证通过 |
| Invalid（无效） | 错误色深色 | 验证失败 |

### 3.2 排版系统

#### 3.2.1 字体家族

系统使用三套字体：

- **界面字体**：Inter 为首选，依次回退到系统默认无衬线字体（如 macOS 的 SF Pro、Windows 的 Segoe UI）
- **代码字体**：JetBrains Mono 为首选，用于代码片段、日志内容、JSON 展示，依次回退到 Fira Code、Consolas 等等宽字体
- **数字字体**：Roboto Mono 或 SF Mono，用于数据展示场景，确保数字等宽对齐

#### 3.2.2 字号规范

以 16px 为基准，定义 8 级字号：

- 12px：辅助文字、小标签
- 13px：次要内容、描述文字
- 14px：常规正文（大部分界面文字）
- 16px：基准正文
- 18px：强调文本
- 20px：小标题
- 24px：页面标题
- 30px：大标题、数据指标

#### 3.2.3 字重规范

- 400（常规）：正文内容
- 500（中等）：次要强调、标签
- 600（半粗）：标题、按钮文字
- 700（粗体）：重要标题、大数字指标

#### 3.2.4 行高规范

- 1.25 倍：标题类文字
- 1.5 倍：正文内容
- 1.75 倍：长段落文本

### 3.3 间距系统

基于 4px 网格，定义从 0 到 80px 的间距梯度（0、4、8、12、16、20、24、32、40、48、64、80px）。

间距应用规则：
- **组件内间距**：8-16px
- **组件间间距**：16-24px
- **区域间间距**：24-48px
- **页面边距**：24-32px

### 3.4 圆角系统

定义 7 级圆角：

- 0px：无圆角
- 2px：小标签
- 4px：按钮、输入框
- 6px：卡片
- 8px：大卡片
- 12px：模态框
- 16px：大容器
- 全圆：圆形元素（如头像、状态点）

### 3.5 阴影系统

定义 6 级阴影，从轻到重：

- **层级 1**：极轻阴影，用于按钮悬停态
- **层级 2**：轻阴影，用于卡片默认态
- **层级 3**：中等阴影，用于下拉菜单、卡片悬停态
- **层级 4**：较重阴影，用于模态框
- **层级 5**：重阴影，用于抽屉面板
- **层级 6**：最重阴影，用于全屏遮罩

### 3.6 图标系统

#### 3.6.1 图标库

使用 Lucide Icons 作为主要图标库，风格统一、SVG 格式。提供 16px、20px、24px、32px 四种尺寸，笔触宽度统一为 2px。

#### 3.6.2 常用图标映射

| 功能 | 图标名 | 使用场景 |
|------|--------|----------|
| Dashboard | LayoutDashboard | 仪表盘首页 |
| Service | Package | 服务列表、服务卡片 |
| Project | FolderOpen | 项目列表、项目详情 |
| Instance | PlayCircle | 运行实例 |
| Driver | Cpu | 驱动管理 |
| Start | Play | 启动操作 |
| Stop | Square | 停止操作 |
| Reload | RotateCw | 重载操作 |
| Delete | Trash2 | 删除操作 |
| Edit | Edit2 | 编辑操作 |
| Settings | Settings | 配置入口 |
| Logs | FileText | 日志查看 |
| Valid | CheckCircle | 验证通过 |
| Invalid | AlertCircle | 验证失败 |
| Info | Info | 信息提示 |
| Warning | AlertTriangle | 警告提示 |
| Error | XCircle | 错误提示 |
| Search | Search | 搜索功能 |
| Filter | Filter | 筛选功能 |
| Refresh | RefreshCw | 刷新数据 |

---

## 4. 组件库

### 4.1 按钮（Button）

#### 4.1.1 变体

系统提供五种按钮变体，适用于不同操作优先级：

- **主要按钮（Primary）**：蓝色实心填充，白色文字。用于页面中最重要的操作，如"创建项目"、"保存"。悬停时颜色略微加深。
- **次要按钮（Secondary）**：白色背景，灰色边框和文字。用于次要操作，如"取消"、"返回"。悬停时背景变为极浅灰色。
- **危险按钮（Danger）**：红色实心填充，白色文字。用于删除、终止等不可逆操作。悬停时颜色加深。
- **幽灵按钮（Ghost）**：透明背景，蓝色文字。用于轻量级操作，如"查看详情"。悬停时出现浅蓝色背景。
- **链接按钮（Link）**：透明背景，蓝色文字，悬停时出现下划线。用于导航性质的操作。

#### 4.1.2 尺寸

提供三种尺寸：

- **小号（sm）**：高度 32px，水平内边距 12px，字号 13px。用于表格行内操作、紧凑区域。
- **中号（md）**：高度 40px，水平内边距 16px，字号 14px。默认尺寸，用于大部分场景。
- **大号（lg）**：高度 48px，水平内边距 24px，字号 16px。用于突出的行动号召。

#### 4.1.3 状态

- **默认态**：正常显示
- **悬停态**：颜色加深约 10%，出现轻微阴影
- **按下态**：颜色加深约 20%
- **禁用态**：整体透明度降至 50%，鼠标变为禁止图标，不响应交互
- **加载态**：显示旋转加载图标，禁用点击

#### 4.1.4 图标按钮

- **纯图标按钮**：正方形，内边距相等，只显示图标。必须提供无障碍标签。
- **图标+文字组合**：图标在文字左侧，间距 6px。

### 4.2 输入框（Input）

#### 4.2.1 基础输入

每个输入框包含以下可选元素：标签（显示在上方）、占位文字（灰色提示）、帮助文字（显示在下方，灰色小字）、错误信息（显示在下方，红色小字）。

#### 4.2.2 样式规范

输入框高度 40px，水平内边距 12px，灰色边框，4px 圆角。获得焦点时边框变为蓝色，外围出现浅蓝色光晕。错误状态时边框变为红色。禁用状态时背景变为浅灰色，鼠标变为禁止图标。

#### 4.2.3 输入类型

- **文本（Text）**：普通文本输入
- **数字（Number）**：支持最小值、最大值、步进值
- **密码（Password）**：带显示/隐藏切换按钮
- **邮箱（Email）**：自动邮箱格式验证
- **URL**：自动 URL 格式验证
- **搜索（Search）**：带清除按钮
- **多行文本（Textarea）**：可调整高度

### 4.3 选择器（Select）

#### 4.3.1 下拉选择

点击后展开下拉菜单，显示选项列表。支持占位文字提示。选中项在下拉菜单中高亮显示。

#### 4.3.2 多选

支持多选模式，已选项以标签形式显示在输入框内，可单独移除。可设置最大选择数量。

#### 4.3.3 交互规范

- 点击打开下拉菜单
- 支持键盘导航（上下箭头选择、回车确认、Esc 关闭）
- 支持输入过滤（在下拉菜单中搜索）
- 选中项高亮显示
- 长列表使用虚拟滚动优化性能

### 4.4 卡片（Card）

#### 4.4.1 结构

卡片由三个可选区域组成：

- **卡片头部（CardHeader）**：显示标题和操作按钮，底部有细分割线
- **卡片主体（CardBody）**：主要内容区域
- **卡片底部（CardFooter）**：操作按钮区域，顶部有细分割线，背景为极浅灰色

#### 4.4.2 样式

白色背景，8px 圆角，轻阴影。悬停时阴影加深，卡片微微上移 2px。可点击的卡片鼠标变为手型。

### 4.5 表格（Table）

#### 4.5.1 功能特性

- **排序**：点击列头排序，显示箭头指示排序方向
- **选择**：行首复选框，支持全选
- **固定表头**：滚动时表头固定在顶部
- **虚拟滚动**：大数据量时只渲染可见行
- **空状态**：无数据时显示友好提示图标和文字
- **加载状态**：数据加载中显示骨架屏或旋转加载图标

#### 4.5.2 样式

表头背景为极浅灰色，字号 12px，半粗字重，大写字母，灰色文字。表格行之间用浅灰色分割线分隔，悬停时行背景变为极浅灰色。单元格内边距为 12px 上下、16px 左右。

### 4.6 标签（Badge）

#### 4.6.1 状态标签

提供五种语义变体：

- **成功（success）**：浅绿色背景，深绿色文字。用于"Running"、"Valid"等。
- **错误（error）**：浅红色背景，深红色文字。用于"Error"、"Invalid"等。
- **警告（warning）**：浅橙色背景，深橙色文字。用于"Pending"等。
- **信息（info）**：浅青色背景，深青色文字。用于"Stopped"、"Enabled"等。
- **默认（default）**：浅灰色背景，灰色文字。用于"Unknown"、"Disabled"等。

#### 4.6.2 样式

全圆角（药丸形），字号 12px，中等字重，水平内边距 8px，垂直内边距 2px。可选带圆点变体：在文字左侧显示一个 6px 的实心圆点，颜色与文字一致。

### 4.7 模态框（Modal）

#### 4.7.1 结构

模态框由遮罩层和内容面板组成。内容面板包含：

- **头部**：标题和关闭按钮
- **主体**：可滚动的内容区域
- **底部**：操作按钮（通常为"取消"和"确认"）

#### 4.7.2 尺寸

提供五种尺寸：小（最大宽度 400px）、中（600px）、大（800px）、超大（1200px）、全屏。

#### 4.7.3 交互规范

- 打开时焦点自动移至模态框内
- 按 Esc 键关闭（除非设置为强制模态）
- 点击遮罩层关闭（可配置是否允许）
- 关闭时焦点返回到触发元素
- 打开期间页面滚动锁定

### 4.8 通知（Toast）

#### 4.8.1 类型

提供四种通知类型：成功（绿色）、错误（红色）、警告（橙色）、信息（蓝色）。每种类型有对应的图标和颜色。

#### 4.8.2 行为

- 显示位置：右上角（可配置）
- 持续时间：3-5 秒后自动消失（可配置）
- 堆叠规则：最多同时显示 3 个，超出的排队等待
- 交互：可点击关闭按钮手动关闭，鼠标悬停时暂停自动消失倒计时

### 4.9 表单（Form）

#### 4.9.1 布局

表单按逻辑分组为多个区段（FormSection），每个区段有标题。区段内的字段垂直排列，标签在输入框上方。表单底部有固定的操作栏，包含"取消"和"保存"按钮。

#### 4.9.2 验证规则

- **即时验证**：输入框失去焦点时验证当前字段
- **提交验证**：点击提交时对所有字段进行完整验证
- **错误显示**：错误信息显示在对应字段下方，红色小字
- **必填标识**：必填字段的标签后显示红色星号

### 4.10 代码编辑器（CodeEditor）

#### 4.10.1 功能

基于 Monaco Editor 实现，支持以下功能：

- **语法高亮**：支持 JSON、JavaScript、YAML 格式
- **代码折叠**：大型配置文件可折叠代码块
- **一键格式化**：自动格式化代码
- **实时校验**：基于 schema 的实时错误提示
- **智能补全**：基于 schema 的自动补全建议
- **行号显示**：左侧显示行号
- **深色主题**：默认使用深色背景主题

---

## 5. 布局系统

### 5.1 应用布局

#### 5.1.1 整体结构

应用采用经典的侧边栏+主内容区布局。左侧为固定侧边栏，右侧为主内容区域，主内容区域独立滚动。

#### 5.1.2 侧边栏（Sidebar）

- **宽度**：展开状态 240px，可折叠至 60px（仅显示图标）
- **定位**：固定在屏幕左侧，从顶部到底部
- **背景**：白色，右侧有浅灰色边框分隔
- **结构**：
  - 顶部品牌区：显示品牌图标（蓝色圆角方块内白色字母"S"）、产品名称"StdioLink"、版本号
  - 中部导航区：主导航菜单，从上到下依次为 Dashboard、Projects、Services、Instances、Drivers
  - 底部功能区：Settings 入口，与主导航之间用分割线隔开
- **导航项样式**：每项包含图标和文字，左对齐。当前页面对应的导航项使用浅蓝色背景和蓝色文字高亮。悬停时背景变为浅灰色。

#### 5.1.3 主内容区（Main Content）

- **位置**：紧邻侧边栏右侧，占据剩余宽度
- **内边距**：24-32px
- **最大宽度**：1600px（超宽屏幕时居中显示）
- **滚动**：独立滚动区域，不影响侧边栏

### 5.2 页面布局模式

#### 5.2.1 列表页布局

从上到下依次为：

1. **页面头部**：左侧显示页面标题和副标题（如记录数量），右侧显示主要操作按钮
2. **筛选栏**：搜索框、筛选下拉菜单、视图切换按钮横向排列
3. **内容区域**：卡片网格或表格形式展示数据列表

#### 5.2.2 详情页布局

从上到下依次为：

1. **面包屑导航**：显示层级路径
2. **页面头部**：标题、状态标签、操作按钮
3. **标签页导航**：多个标签页切换不同内容面板
4. **标签页内容**：信息卡片、关联数据等

#### 5.2.3 表单页布局

从上到下依次为：

1. **页面头部**：标题、保存和取消按钮
2. **表单区段**：按逻辑分组的表单字段
3. **底部操作栏**：固定在底部的保存和取消按钮

### 5.3 网格系统

#### 5.3.1 基础网格

采用 12 列网格系统，列间距 24px。通过指定跨列数实现不同宽度的布局（如 4 列占 1/3 宽度，6 列占 1/2 宽度，8 列占 2/3 宽度）。

#### 5.3.2 卡片网格

卡片列表使用自适应网格，每张卡片最小宽度 320px，自动填充可用空间。卡片之间间距 24px。

---

## 6. 页面设计

### 6.1 仪表盘（Dashboard）

仪表盘是用户进入系统后的首页，提供系统运行状态的全局概览。

#### 6.1.1 页面结构

页面头部左侧显示标题"Dashboard"和副标题"System overview at a glance"，右侧放置"Refresh"刷新按钮。

页面内容从上到下分为四个区域：

**第一行：指标卡片区**

横向排列 4 张指标卡片，等宽分布：

1. **Total Services**：左侧显示蓝色背景的 Package 图标，右侧显示服务总数（大号粗体数字）和有效服务数量（灰色小字）
2. **Active Projects**：左侧显示蓝色背景的 FolderOpen 图标，右侧显示项目总数和相比上周的变化趋势
3. **Running Instances**：左侧显示绿色背景的 PlayCircle 图标，右侧显示运行中实例数和总实例数
4. **Failures Today**：左侧显示图标（有故障时为红色背景，无故障时为绿色背景），右侧显示今日故障数和"auto-restart triggered"描述

每张卡片白色背景，悬停时阴影加深。

**第二行：状态图表区**

左右两栏布局，左侧占 1/3 宽度，右侧占 2/3 宽度：

- **左侧 - 实例状态分布（Instance Status）**：一张卡片内放置环形图（Donut Chart）。环形图展示四种状态的占比：Running（绿色）、Stopped（灰色）、Error（红色）、Pending（橙色）。环形图中心显示实例总数和"Total"文字。图表下方显示图例，每个图例项包含对应颜色的圆点、状态名称和数量。
- **右侧 - 实例活动趋势（Instance Activity）**：一张卡片内放置面积图（Area Chart）。卡片头部右侧有时间范围选择器（Last 1 hour / Last 6 hours / Last 24 hours / Last 7 days）。图表展示三条数据线：Running（绿色填充面积）、Started（蓝色线条）、Failed（红色线条）。X 轴为时间，Y 轴为数量，显示网格线和悬停提示。

**第三行：健康度与事件区**

左右两栏布局，左侧占 7/12 宽度，右侧占 5/12 宽度：

- **左侧 - 项目健康度（Project Health）**：卡片头部显示标题和"View All"链接按钮（点击跳转到项目列表页）。卡片内容为项目列表，每行显示：左侧一个状态圆点（绿色=健康且有运行实例、橙色=健康但无运行实例、红色=无效）、项目名称、所属服务名称；右侧显示实例数量和健康/无效标签。各行之间用细分割线分隔，悬停时行背景变浅灰色，可点击跳转到项目详情。
- **右侧 - 最近事件（Recent Events）**：卡片头部显示标题和事件数量标签。卡片内容为事件时间线列表，每条事件包含：左侧一个圆形图标（不同事件类型对应不同颜色和图标——实例启动为绿色 Play、实例停止为灰色 Square、实例失败为红色 XCircle、项目创建为蓝色 Plus、项目验证为绿色 CheckCircle、服务扫描为蓝色 RefreshCw、调度触发为橙色 Clock），右侧显示事件描述文字和相对时间。最多显示 8 条。

**第四行：调度概览（Schedule Overview）**

一张横跨全宽的卡片，内部等分为三列：

1. **Daemon Projects**：顶部显示绿色圆形 Shield 图标，下方显示守护进程项目数量（大号粗体）、标签"Daemon Projects"、描述"X active · Always-on with auto-restart"
2. **Scheduled Tasks**：顶部显示蓝色圆形 Clock 图标，下方显示定时任务数量、标签"Scheduled Tasks"、描述"Next run: HH:MM · Periodic execution"
3. **Manual Projects**：顶部显示橙色圆形 Hand 图标，下方显示手动项目数量、标签"Manual Projects"、描述"Last run: Xh ago · On-demand"

### 6.2 服务列表页（Services）

#### 6.2.1 页面结构

页面头部左侧显示标题"Services"和副标题（如"6 services available"），右侧放置"Scan Services"按钮（次要样式，带 RefreshCw 图标），点击触发服务目录重新扫描。

头部下方为筛选栏，包含：搜索输入框（占位文字"Search services..."）和状态筛选下拉菜单。

主内容区域使用三列卡片网格展示服务列表。当无服务数据时，显示空状态提示：居中的 Package 图标、标题"No services found"、描述文字和"Scan Services"操作按钮。

#### 6.2.2 ServiceCard 组件

每张服务卡片结构如下：

- **头部**：左侧显示青色背景的 Package 图标、服务名称（半粗体）和服务 ID（小号灰色文字）；右侧显示有效/无效状态标签
- **主体**：显示服务描述文字（灰色），下方横向排列元信息标签：命令数量（Terminal 图标）、驱动数量（Cpu 图标）、关联项目数量（FolderOpen 图标）
- 整张卡片可点击，点击跳转到服务详情页。悬停时阴影加深，边框变为浅蓝色。

### 6.3 服务详情页（Service Detail）

#### 6.3.1 页面结构

页面顶部显示面包屑导航（Services > 服务名称），下方为页面头部，显示服务名称、服务 ID 和有效性状态标签。

主内容区域使用标签页切换，包含四个标签页：

1. **Overview（概览）**：左右两栏布局。左侧为服务基本信息卡片，以键值对形式显示 ID（可复制）、名称、版本、目录路径。右侧为 Manifest 卡片，使用只读代码编辑器展示服务清单的 JSON 内容。
2. **Commands（命令）**：以表格形式展示服务支持的所有命令，包含命令名称、参数定义、返回类型等信息。
3. **Configuration Schema（配置模式）**：以可视化方式展示服务的配置 schema 结构，包含字段名、类型、约束、默认值等。
4. **Projects Using（关联项目）**：以表格形式展示使用该服务的所有项目。

### 6.4 项目列表页（Projects）

#### 6.4.1 页面结构

页面头部左侧显示标题"Projects"和副标题（如"8 projects"），右侧放置"Create Project"主要按钮（带 Plus 图标），点击跳转到项目创建页。

头部下方为筛选栏，包含：搜索输入框（占位文字"Search projects..."）、状态筛选下拉菜单（All / Valid / Invalid）、自动启动筛选下拉菜单（All / Enabled / Disabled）、视图切换按钮组（卡片视图/列表视图）。

主内容区域默认使用三列卡片网格展示项目列表。当无项目数据时，显示空状态提示：居中的 FolderOpen 图标、标题"No projects yet"、描述"Create a project to start orchestrating services"和"Create Project"操作按钮。

#### 6.4.2 ProjectCard 组件

每张项目卡片分为三个区域：

- **头部**：左侧显示蓝色背景的 FolderOpen 图标、项目名称（半粗体）和项目 ID（等宽小号灰色文字）；右侧显示 Valid/Invalid 状态标签
- **主体**：使用两列网格展示四项信息：
  - Service：关联的服务名称，显示为可点击链接
  - Instances：运行中实例数量，有实例时文字为绿色
  - Auto Start：自动启动状态标签（Enabled 为信息色，Disabled 为默认灰色）
  - Schedule：调度类型（daemon / fixed_rate / manual）
- **底部**：浅灰色背景条，左侧放置启动按钮（Play 图标，有运行实例时禁用）和停止按钮（Square 图标，无运行实例时禁用）；右侧放置编辑按钮（Edit2 图标）和删除按钮（Trash2 图标，红色危险样式）

整张卡片可点击跳转到项目详情。底部按钮点击时阻止事件冒泡，不触发卡片跳转。

### 6.5 项目创建/编辑页（Project Form）

#### 6.5.1 页面结构

页面头部左侧显示标题（创建时为"Create Project"，编辑时为"Edit Project"），右侧放置"Cancel"次要按钮和"Save Project"主要按钮（保存中显示加载状态）。

表单内容分为三个区段：

**区段一：基本信息（Basic Information）**

- **Project ID**（必填）：文本输入框，占位文字"my-project"，帮助文字"Unique identifier, cannot be changed after creation"。编辑模式下此字段禁用不可修改。
- **Name**（必填）：文本输入框，占位文字"My Project"
- **Description**（选填）：多行文本框，3 行高度，占位文字"Project description..."

**区段二：服务配置（Service Configuration）**

- **Service**（必填）：下拉选择器，列出所有可用服务。选择服务后，下方动态显示该服务的配置表单。
- **Configuration**：根据所选服务的 configSchema 自动生成的智能表单（参见附录 A：Schema 驱动表单）。

**区段三：运行时设置（Runtime Settings）**

- **Auto start on server startup**：复选框，控制服务器启动时是否自动启动该项目
- **Restart Policy**：单选按钮组，三个选项——Never restart（从不重启）、Restart on failure（失败时重启）、Always restart（总是重启）
- **Max Failures**：数字输入框，最小值 0，帮助文字"Stop trying after N consecutive failures (0 = unlimited)"

### 6.6 实例监控页（Instances）

#### 6.6.1 页面结构

页面头部左侧显示标题"Running Instances"和副标题（如"6 active instances"），右侧放置"Refresh"按钮。

头部下方为筛选栏，包含：搜索输入框（占位文字"Search instances..."）和状态筛选下拉菜单（All / Running / Stopped / Error）。

主内容区域使用垂直列表展示实例卡片，每张卡片占据全宽，卡片之间间距 12px。当无运行实例时，显示空状态提示：居中的 PlayCircle 图标、标题"No running instances"、描述"Start a project to see its instance here"和"Go to Projects"操作按钮。

#### 6.6.2 InstanceCard 组件

每张实例卡片为横向布局，从左到右依次为：

- **状态圆点**：10px 圆形指示灯。Running 为绿色并带浅绿色外圈光晕，Stopped 为灰色，Error 为红色并带浅红色外圈光晕。
- **基本信息**：项目名称（半粗体，可点击跳转到项目详情）和实例 ID（等宽小号灰色文字）
- **运行指标**：横向排列三组数据——Uptime（运行时长）、CPU（CPU 占用率）、Memory（内存占用），每组数据上方为数值（半粗体），下方为标签（灰色小字）
- **操作按钮**：查看日志按钮（FileText 图标）和终止按钮（XCircle 图标，红色危险样式）

卡片白色背景，悬停时阴影加深。

### 6.7 日志查看器（Logs Viewer）

#### 6.7.1 模态框结构

日志查看器以超大模态框（最大宽度 1200px）形式打开。

模态框头部显示标题"Instance Logs - {实例ID}"，右侧放置"Download"下载按钮和"Refresh"刷新按钮。

模态框主体分为左右两栏，总高度 600px：

- **左侧 - 日志内容区**：占据大部分宽度，深色背景（近黑色），使用等宽字体显示日志内容。每行日志包含时间戳（灰色）和消息内容。不同级别的日志使用不同颜色：Error 为红色并带红色左侧边线、Warning 为橙色并带橙色左侧边线、Info 为蓝色并带蓝色左侧边线。搜索匹配的文字使用黄色高亮背景。支持自动滚动到最新日志。
- **右侧 - 工具栏**：宽度 256px，白色背景，左侧有边框分隔。包含：日志级别筛选下拉菜单（All / Debug / Info / Warning / Error）、搜索输入框、自动滚动复选框。

---

## 7. 交互规范

### 7.1 导航规范

#### 7.1.1 面包屑导航

- 显示当前页面在层级中的位置
- 除最后一项（当前页）外，其余项均可点击返回上级页面
- 使用">"作为层级分隔符

#### 7.1.2 侧边栏导航

- 当前页面对应的导航项高亮显示（浅蓝色背景、蓝色文字）
- 折叠状态下鼠标悬停显示文字提示（tooltip）
- 支持键盘导航（Tab 切换焦点、上下箭头选择、Enter 确认）

### 7.2 数据加载

#### 7.2.1 初始加载

页面首次加载数据时，使用骨架屏（Skeleton）占位，模拟最终内容的布局形状，避免页面跳动。或者在页面中心显示旋转加载图标和加载提示文字。

#### 7.2.2 刷新加载

- 页面顶部显示细长进度条
- 触发刷新的按钮显示加载状态
- 不遮挡已有内容，用户仍可浏览

#### 7.2.3 分页加载

- 使用虚拟滚动或无限滚动加载更多数据
- 底部显示加载指示器
- 显示已加载数量和总数

### 7.3 错误处理

#### 7.3.1 表单验证错误

输入框边框变为红色，下方显示红色错误信息文字。焦点自动定位到第一个错误字段。

#### 7.3.2 API 错误

- **轻量错误**：使用 Toast 通知显示错误信息，可附带"Retry"重试按钮
- **严重错误**：在内容区域显示错误状态页面，包含警告图标、错误标题、错误描述和"Try Again"重试按钮

### 7.4 确认操作

#### 7.4.1 删除确认

弹出确认对话框，标题为"Delete Project"，描述为"Are you sure you want to delete '{名称}'? This action cannot be undone."，确认按钮使用红色危险样式。

#### 7.4.2 危险操作

所有危险操作（删除、终止等）需要：
- 使用红色警告色提示
- 弹出二次确认对话框
- 对于特别重要的操作，要求用户输入名称确认

### 7.5 键盘快捷键

| 快捷键 | 功能 |
|--------|------|
| `/` | 聚焦搜索框 |
| `Ctrl/Cmd + K` | 打开命令面板 |
| `Esc` | 关闭模态框/清除搜索 |
| `Ctrl/Cmd + S` | 保存表单 |
| `Ctrl/Cmd + R` | 刷新当前页 |
| `?` | 显示快捷键帮助 |

---

## 8. 数据可视化

### 8.1 状态图表

#### 8.1.1 实例状态分布

使用环形图（Donut Chart）展示实例的状态分布。图表直径约 200px，中心镂空区域显示总数。每种状态使用对应的语义色：Running 为绿色、Stopped 为灰色、Error 为红色、Pending 为橙色。图表下方或右侧显示图例。

#### 8.1.2 项目健康度

使用列表形式展示项目健康状态，每行左侧有颜色圆点指示健康度，右侧显示实例数和状态标签。绿色圆点表示健康且有运行实例，橙色表示健康但无运行实例，红色表示项目无效。

### 8.2 时间序列图

#### 8.2.1 实例活动趋势

使用面积图（Area Chart）展示实例数量随时间的变化趋势。X 轴为时间，Y 轴为数量。支持多条数据线叠加显示（如 Running、Started、Failed）。每条线使用不同颜色，Running 线条下方填充半透明色块。显示网格线辅助读数，悬停时显示数据提示框。支持切换时间范围（1 小时、6 小时、24 小时、7 天）。

### 8.3 指标卡片

指标卡片用于展示关键数字。每张卡片包含：图标（带语义色背景）、指标标签（灰色小字）、指标数值（大号粗体）、辅助描述或趋势信息（灰色小字）。四张卡片横向等宽排列，悬停时阴影加深。

---

## 9. 响应式设计

### 9.1 断点系统

定义四个响应式断点：

- **移动端（sm）**：屏幕宽度 640px 及以下
- **平板（md）**：屏幕宽度 641px 至 1024px
- **桌面（lg）**：屏幕宽度 1025px 及以上
- **大屏桌面（xl）**：屏幕宽度 1440px 及以上

### 9.2 布局适配

#### 9.2.1 移动端（640px 以下）

- 侧边栏隐藏，改用底部导航栏
- 卡片网格变为单列垂直排列
- 表格转为卡片列表形式
- 模态框全屏显示

#### 9.2.2 平板（641px - 1024px）

- 侧边栏可折叠（默认折叠为图标模式）
- 卡片网格变为 2 列
- 表格保持，支持横向滚动

#### 9.2.3 桌面（1025px 以上）

- 侧边栏固定展开
- 卡片网格 3-4 列
- 表格完整显示

### 9.3 触摸优化

- 所有可交互元素的最小点击区域为 44×44px
- 支持滑动手势（如左滑删除）
- 长按显示上下文菜单
- 移动端禁用悬停效果（避免触摸设备上的粘滞状态）

---

## 10. 开发指南

### 10.1 技术栈建议

- **前端框架**：React 18+ 或 Vue 3+
- **状态管理**：Zustand（React）或 Pinia（Vue）
- **路由**：React Router v6 或 Vue Router v4
- **样式方案**：Tailwind CSS 3+
- **基础组件**：Radix UI（React）或 Headless UI（Vue）
- **表单处理**：React Hook Form 或 VeeValidate
- **图表库**：Recharts 或 Chart.js
- **图标库**：Lucide React 或 Lucide Vue
- **代码编辑器**：Monaco Editor
- **HTTP 客户端**：Axios 或 Fetch API
- **构建工具**：Vite

### 10.2 文件组织

建议的项目目录结构：

- **components/ui/**：基础 UI 组件（Button、Input、Card、Table、Badge、Modal 等）
- **components/layouts/**：布局组件（AppLayout、Sidebar 等）
- **components/domain/**：业务组件（ServiceCard、ProjectForm、InstanceCard 等）
- **pages/**：页面组件，按功能模块分子目录（services/、projects/、instances/、drivers/）
- **hooks/**：自定义 Hooks（useServices、useProjects 等）
- **api/**：API 调用封装（services、projects、instances、drivers）
- **store/**：状态管理（servicesStore 等）
- **utils/**：工具函数（formatters、validators）
- **styles/**：全局样式和变量定义
- **types/**：TypeScript 类型定义（service、project 等）

### 10.3 命名规范

- **组件命名**：PascalCase，如 ServiceCard、ProjectForm。文件名与组件名一致。
- **变量命名**：camelCase，如 serviceList、projectConfig。常量全大写，如 API_BASE_URL、MAX_RETRIES。
- **CSS 类名**：kebab-case，如 service-card、project-form。推荐使用 BEM 方法论，如 card__header、button--primary。

### 10.4 性能优化

- **代码分割**：路由级别懒加载，每个页面模块按需加载。大型组件（如代码编辑器）也应懒加载。
- **虚拟滚动**：当列表数据量超过 100 条时，使用虚拟滚动只渲染可见区域的行，避免 DOM 节点过多导致卡顿。
- **防抖/节流**：搜索输入使用 300ms 防抖，避免频繁触发 API 请求。滚动事件使用节流处理。

### 10.5 可访问性检查清单

- 所有交互元素可通过键盘访问
- 表单输入框有正确的 label 关联
- 图标按钮有无障碍标签（aria-label）
- 颜色对比度符合 WCAG AA 标准
- 动态内容变化有 aria-live 通知
- 模态框有焦点陷阱（打开时焦点不会跑到模态框外）
- 支持屏幕阅读器

### 10.6 测试建议

- **单元测试**：使用 Jest + Testing Library，验证组件渲染正确性和交互行为
- **端到端测试**：使用 Playwright，覆盖核心用户流程（如创建项目、启动实例、查看日志等）
- **视觉回归测试**：使用 Chromatic 或 Percy，确保 UI 变更不引入意外的视觉差异

---

## 附录 A：Schema 驱动表单

### A.1 自动表单生成

基于 stdiolink 的 FieldMeta 元数据，系统可自动生成配置表单。表单生成器遍历 schema 中定义的所有字段，根据字段类型自动选择对应的输入控件：

- **String 类型**：渲染为普通文本输入框
- **Int / Int64 / Double 类型**：渲染为数字输入框，自动应用 min、max、step 约束
- **Bool 类型**：渲染为复选框
- **Enum 类型**：渲染为下拉选择器，选项来自 enumValues 约束
- **Object 类型**：递归渲染为嵌套的表单区段，包含子字段
- **Array 类型**：渲染为可增删的列表，每项根据 items 定义渲染对应控件

每个字段自动显示标签（取自 description 或 name）、必填标识（取自 required）和帮助文字。

### A.2 UI Hint 支持

当字段定义中包含 UIHint 时，表单生成器优先使用 hint 指定的特殊控件：

- **textarea**：渲染为多行文本框（5 行高度）
- **code**：渲染为代码编辑器（Monaco Editor），支持 JSON 语法高亮
- **slider**：渲染为滑块控件，自动应用 min、max、step
- **color**：渲染为颜色选择器
- **date**：渲染为日期选择器

如果没有 UIHint，则按字段类型使用默认控件。

---

## 附录 B：API 集成

### B.1 API 端点清单

前端需要对接 stdiolink_server 提供的以下 REST API：

**服务相关**
- 获取服务列表：GET /api/services
- 获取服务详情：GET /api/services/{id}
- 触发服务扫描：POST /api/services/scan

**项目相关**
- 获取项目列表：GET /api/projects
- 获取项目详情：GET /api/projects/{id}
- 创建项目：POST /api/projects
- 更新项目：PUT /api/projects/{id}
- 删除项目：DELETE /api/projects/{id}
- 验证项目：POST /api/projects/{id}/validate
- 启动项目：POST /api/projects/{id}/start
- 停止项目：POST /api/projects/{id}/stop
- 重载项目：POST /api/projects/{id}/reload
- 获取项目运行态：GET /api/projects/{id}/runtime

**实例相关**
- 获取实例列表：GET /api/instances
- 终止实例：POST /api/instances/{id}/terminate
- 获取实例日志：GET /api/instances/{id}/logs

**驱动相关**
- 获取驱动列表：GET /api/drivers
- 触发驱动扫描：POST /api/drivers/scan

### B.2 数据获取策略

建议使用 React Query 或类似的数据获取库，实现以下策略：

- **缓存与自动刷新**：列表数据缓存后定期自动刷新，避免频繁请求
- **乐观更新**：操作（如启动、停止）提交后立即更新本地状态，无需等待服务器响应
- **错误重试**：API 请求失败时自动重试（最多 3 次），重试间隔递增
- **关联数据失效**：操作成功后自动使相关缓存失效（如启动项目后刷新实例列表）
- **成功/失败通知**：操作完成后通过 Toast 通知用户结果

---

## 附录 C：预留功能规划

以下功能为未来版本预留，当前版本不实现，但设计时应预留扩展空间。

### C.1 Service 在线创建与编辑

允许用户在 Web UI 中直接创建和编辑 Service 定义，无需手动编写文件。

- **JS 脚本编辑器**：集成 Monaco Editor，提供 JavaScript 语法高亮、智能补全和错误提示，用于编写 Service 的业务逻辑脚本
- **Schema 模板编辑器**：可视化编辑 Service 的配置 schema，支持拖拽排序字段、设置类型和约束
- **Manifest 编辑器**：表单化编辑 Service 的 manifest.json，包含名称、版本、命令定义等
- **一键部署**：编辑完成后一键将 Service 部署到 data_root 目录，自动触发服务扫描

### C.2 Driver 在线测试

允许用户在 Web UI 中直接测试 Driver 的命令，无需编写代码。

- **元数据自动发现**：选择 Driver 后自动获取其支持的命令列表和参数定义
- **命令测试面板**：根据命令的参数 schema 自动生成输入表单，填写参数后一键发送命令，实时显示返回结果（支持流式事件展示）
- **测试历史**：记录每次测试的命令、参数和结果，方便回溯和对比
- **连接管理**：支持同时连接多个 Driver 实例，切换测试目标

### C.3 Instance 进程树与资源监控

提供实例级别的详细资源监控能力。

- **进程树视图**：以树形结构展示实例的主进程及其子进程，显示每个进程的 PID、状态、CPU 和内存占用
- **资源仪表盘**：实时折线图展示 CPU 使用率、内存占用、文件描述符数量等指标的变化趋势
- **聚合视图**：在实例列表页提供所有实例的资源使用汇总，支持按 CPU、内存排序，快速定位资源异常的实例
- **数据可视化**：支持自定义时间范围查看历史资源数据，支持导出为 CSV

---

## 总结

本设计需求文档为 StdioLink UI 提供了全面的产品设计指导，涵盖：

- **视觉系统**：色彩、排版、间距、阴影、图标的完整定义
- **组件库**：10+ 可复用组件的详细行为和样式规范
- **布局系统**：响应式网格、页面模板、侧边栏导航
- **页面设计**：7 个核心页面的详细结构和交互说明（Dashboard、Services、Service Detail、Projects、Project Form、Instances、Logs Viewer）
- **交互规范**：导航、加载、错误处理、确认操作、键盘快捷键
- **数据可视化**：图表、指标卡片、事件时间线
- **响应式设计**：移动端、平板、桌面的适配策略
- **开发指南**：技术栈、文件组织、命名规范、性能优化、可访问性
- **预留功能**：Service 在线编辑、Driver 在线测试、进程资源监控

遵循本文档，开发团队可以保持 UI 的一致性，提高开发效率，确保良好的用户体验，并便于后续维护和扩展。

---

**版本历史**
- v2.0.0 (2026-02-12): 重写为纯自然语言产品设计需求文档，移除所有代码示例和具体色值编码
- v1.1.0 (2026-02-12): 新增 Dashboard 页面；Projects 提升为核心导航并改用卡片布局；新增附录 C 预留功能规划
- v1.0.0 (2026-02-12): 初始版本发布
